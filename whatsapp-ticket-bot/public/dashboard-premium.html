<!DOCTYPE html>
<html lang="pt-BR" class="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WhatsApp Business Hub - Casa de Show</title>
    
    <!-- Tailwind CSS + Configurações customizadas -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        primary: {
                            50: '#f3f1ff',
                            100: '#e9e5ff',
                            500: '#8b5cf6',
                            600: '#7c3aed',
                            700: '#6d28d9',
                            900: '#4c1d95'
                        },
                        gray: {
                            50: '#f9fafb',
                            100: '#f3f4f6',
                            800: '#1f2937',
                            900: '#111827'
                        }
                    },
                    fontFamily: {
                        sans: ['Inter', 'system-ui', 'sans-serif'],
                        mono: ['JetBrains Mono', 'monospace']
                    },
                    animation: {
                        'fade-in': 'fadeIn 0.5s ease-in-out',
                        'slide-up': 'slideUp 0.3s ease-out',
                        'pulse-slow': 'pulse 3s infinite',
                        'bounce-subtle': 'bounceSubtle 2s infinite'
                    }
                }
            }
        }
    </script>
    
    <!-- Google Fonts: Inter (mais moderno que Arial) -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
    
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
    
    <!-- Socket.IO -->
    <script src="/socket.io/socket.io.js"></script>
    
    <style>
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        @keyframes slideUp {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        @keyframes bounceSubtle {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-2px); }
        }
        
        .glass-card {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.37);
        }
        
        .gradient-border {
            position: relative;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 2px;
            border-radius: 12px;
        }
        
        .gradient-border::before {
            content: '';
            position: absolute;
            inset: 1px;
            background: white;
            border-radius: 10px;
        }
        
        .hover-lift {
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .hover-lift:hover {
            transform: translateY(-4px);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
        }
        
        .neon-glow {
            box-shadow: 0 0 20px rgba(139, 92, 246, 0.3);
        }
        
        .status-pulse {
            animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
        }

        .scrollbar-thin::-webkit-scrollbar {
            width: 6px;
        }
        
        .scrollbar-thin::-webkit-scrollbar-track {
            background: #374151;
            border-radius: 3px;
        }
        
        .scrollbar-thin::-webkit-scrollbar-thumb {
            background: #6b7280;
            border-radius: 3px;
        }
        
        .scrollbar-thin::-webkit-scrollbar-thumb:hover {
            background: #9ca3af;
        }
    </style>
</head>

<body class="bg-gradient-to-br from-gray-50 via-white to-gray-100 dark:from-gray-900 dark:via-gray-800 dark:to-gray-900 min-h-screen font-sans">
    
    <!-- Header Moderno -->
    <header class="sticky top-0 z-50 backdrop-blur-md bg-white/80 dark:bg-gray-900/80 border-b border-gray-200 dark:border-gray-700">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                <!-- Logo e Título -->
                <div class="flex items-center space-x-4">
                    <div class="w-10 h-10 bg-gradient-to-br from-primary-500 to-primary-700 rounded-xl flex items-center justify-center">
                        <i data-lucide="message-circle" class="w-6 h-6 text-white"></i>
                    </div>
                    <div>
                        <h1 class="text-xl font-bold text-gray-900 dark:text-white">WhatsApp Business Hub</h1>
                        <p class="text-sm text-gray-500 dark:text-gray-400">Casa de Show - Sistema Multi-Sessão</p>
                    </div>
                </div>
                
                <!-- Controles do Header -->
                <div class="flex items-center space-x-4">
                    <!-- Toggle Dark Mode -->
                    <button id="theme-toggle" class="p-2 rounded-lg bg-gray-100 dark:bg-gray-800 hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors">
                        <i data-lucide="sun" class="w-5 h-5 dark:hidden"></i>
                        <i data-lucide="moon" class="w-5 h-5 hidden dark:block"></i>
                    </button>
                    
                    <!-- Status Geral -->
                    <div class="flex items-center space-x-2 px-3 py-2 bg-green-100 dark:bg-green-900/30 rounded-full">
                        <div class="w-2 h-2 bg-green-500 rounded-full status-pulse"></div>
                        <span class="text-sm font-medium text-green-700 dark:text-green-300">Sistema Online</span>
                    </div>
                    
                    <!-- Menu -->
                    <button class="p-2 rounded-lg bg-gray-100 dark:bg-gray-800 hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors">
                        <i data-lucide="menu" class="w-5 h-5"></i>
                    </button>
                </div>
            </div>
        </div>
    </header>
    
    <!-- Main Container -->
    <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
        
        <!-- Stats Cards Modernas -->
        <div class="grid grid-cols-1 md:grid-cols-4 gap-6 mb-8">
            <!-- Total Mensagens -->
            <div class="bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm rounded-2xl p-6 border border-gray-200 dark:border-gray-700 hover-lift">
                <div class="flex items-center justify-between">
                    <div>
                        <p class="text-sm font-medium text-gray-600 dark:text-gray-400">Mensagens Hoje</p>
                        <p class="text-3xl font-bold text-gray-900 dark:text-white" id="messages-today">847</p>
                        <p class="text-sm text-green-600 dark:text-green-400 flex items-center mt-1">
                            <i data-lucide="trending-up" class="w-4 h-4 mr-1"></i>
                            +12% vs ontem
                        </p>
                    </div>
                    <div class="w-12 h-12 bg-blue-100 dark:bg-blue-900/30 rounded-xl flex items-center justify-center">
                        <i data-lucide="message-square" class="w-6 h-6 text-blue-600 dark:text-blue-400"></i>
                    </div>
                </div>
            </div>
            
            <!-- Vendas -->
            <div class="bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm rounded-2xl p-6 border border-gray-200 dark:border-gray-700 hover-lift">
                <div class="flex items-center justify-between">
                    <div>
                        <p class="text-sm font-medium text-gray-600 dark:text-gray-400">Vendas Hoje</p>
                        <p class="text-3xl font-bold text-gray-900 dark:text-white" id="sales-today">R$ 12.4k</p>
                        <p class="text-sm text-green-600 dark:text-green-400 flex items-center mt-1">
                            <i data-lucide="trending-up" class="w-4 h-4 mr-1"></i>
                            +8% vs ontem
                        </p>
                    </div>
                    <div class="w-12 h-12 bg-green-100 dark:bg-green-900/30 rounded-xl flex items-center justify-center">
                        <i data-lucide="shopping-cart" class="w-6 h-6 text-green-600 dark:text-green-400"></i>
                    </div>
                </div>
            </div>
            
            <!-- Conversões -->
            <div class="bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm rounded-2xl p-6 border border-gray-200 dark:border-gray-700 hover-lift">
                <div class="flex items-center justify-between">
                    <div>
                        <p class="text-sm font-medium text-gray-600 dark:text-gray-400">Taxa Conversão</p>
                        <p class="text-3xl font-bold text-gray-900 dark:text-white" id="conversion-rate">23.8%</p>
                        <p class="text-sm text-green-600 dark:text-green-400 flex items-center mt-1">
                            <i data-lucide="trending-up" class="w-4 h-4 mr-1"></i>
                            +2.1% vs ontem
                        </p>
                    </div>
                    <div class="w-12 h-12 bg-purple-100 dark:bg-purple-900/30 rounded-xl flex items-center justify-center">
                        <i data-lucide="target" class="w-6 h-6 text-purple-600 dark:text-purple-400"></i>
                    </div>
                </div>
            </div>
            
            <!-- Tempo Resposta -->
            <div class="bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm rounded-2xl p-6 border border-gray-200 dark:border-gray-700 hover-lift">
                <div class="flex items-center justify-between">
                    <div>
                        <p class="text-sm font-medium text-gray-600 dark:text-gray-400">Tempo Resp.</p>
                        <p class="text-3xl font-bold text-gray-900 dark:text-white" id="response-time">1.2s</p>
                        <p class="text-sm text-green-600 dark:text-green-400 flex items-center mt-1">
                            <i data-lucide="zap" class="w-4 h-4 mr-1"></i>
                            Instantâneo
                        </p>
                    </div>
                    <div class="w-12 h-12 bg-amber-100 dark:bg-amber-900/30 rounded-xl flex items-center justify-center">
                        <i data-lucide="clock" class="w-6 h-6 text-amber-600 dark:text-amber-400"></i>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Sessions Grid Moderno -->
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8">
            
            <!-- Sessão de Vendas -->
            <div class="bg-white/90 dark:bg-gray-800/90 backdrop-blur-sm rounded-3xl p-8 border border-gray-200 dark:border-gray-700 hover-lift group">
                <div class="flex items-center justify-between mb-6">
                    <div class="flex items-center space-x-4">
                        <div class="w-16 h-16 bg-gradient-to-br from-green-400 to-green-600 rounded-2xl flex items-center justify-center shadow-lg">
                            <i data-lucide="shopping-bag" class="w-8 h-8 text-white"></i>
                        </div>
                        <div>
                            <h2 class="text-2xl font-bold text-gray-900 dark:text-white">Bot Vendas</h2>
                            <p class="text-gray-600 dark:text-gray-400">Sistema de e-commerce automatizado</p>
                        </div>
                    </div>
                    <div id="sales-status-badge" class="px-4 py-2 bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-300 rounded-full text-sm font-medium flex items-center space-x-2">
                        <div class="w-2 h-2 bg-red-500 rounded-full"></div>
                        <span>Desconectado</span>
                    </div>
                </div>
                
                <!-- QR Code Container -->
                <div id="sales-qr-container" class="hidden mb-6">
                    <div class="bg-gradient-to-br from-gray-50 to-gray-100 dark:from-gray-700 dark:to-gray-800 rounded-2xl p-6 text-center border-2 border-dashed border-gray-300 dark:border-gray-600">
                        <div class="mb-4">
                            <div class="w-12 h-12 bg-primary-100 dark:bg-primary-900/30 rounded-xl mx-auto flex items-center justify-center mb-3">
                                <i data-lucide="qr-code" class="w-6 h-6 text-primary-600 dark:text-primary-400"></i>
                            </div>
                            <h3 class="text-lg font-semibold text-gray-900 dark:text-white mb-2">Escaneie com WhatsApp Business</h3>
                            <p class="text-sm text-gray-600 dark:text-gray-400">Use um número dedicado para vendas</p>
                        </div>
                        <div class="flex justify-center">
                            <img id="sales-qr-image" class="w-48 h-48 border-4 border-white dark:border-gray-700 rounded-2xl shadow-lg" src="" alt="QR Code Vendas">
                        </div>
                    </div>
                </div>
                
                <!-- Controles -->
                <div class="flex space-x-3 mb-6">
                    <button onclick="startSession('sales')" class="flex-1 bg-gradient-to-r from-green-500 to-green-600 hover:from-green-600 hover:to-green-700 text-white font-semibold py-3 px-6 rounded-xl transition-all duration-200 flex items-center justify-center space-x-2 group">
                        <i data-lucide="play" class="w-5 h-5 group-hover:scale-110 transition-transform"></i>
                        <span>Iniciar Vendas</span>
                    </button>
                    <button onclick="stopSession('sales')" class="px-6 py-3 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-300 rounded-xl transition-colors flex items-center justify-center">
                        <i data-lucide="square" class="w-5 h-5"></i>
                    </button>
                </div>
                
                <!-- Métricas da Sessão -->
                <div class="grid grid-cols-2 gap-4">
                    <div class="bg-gray-50 dark:bg-gray-700/50 rounded-xl p-4">
                        <p class="text-sm text-gray-600 dark:text-gray-400 mb-1">Última atividade</p>
                        <p class="font-semibold text-gray-900 dark:text-white" id="sales-activity">-</p>
                    </div>
                    <div class="bg-gray-50 dark:bg-gray-700/50 rounded-xl p-4">
                        <p class="text-sm text-gray-600 dark:text-gray-400 mb-1">Uptime</p>
                        <p class="font-semibold text-gray-900 dark:text-white" id="sales-uptime">00:00:00</p>
                    </div>
                </div>
                
                <!-- Features Lista -->
                <div class="mt-6 pt-6 border-t border-gray-200 dark:border-gray-700">
                    <h4 class="font-semibold text-gray-900 dark:text-white mb-3">Funcionalidades</h4>
                    <div class="space-y-2">
                        <div class="flex items-center space-x-3 text-sm">
                            <div class="w-2 h-2 bg-green-500 rounded-full"></div>
                            <span class="text-gray-600 dark:text-gray-400">Catálogo digital (camarotes, bistro, ingressos)</span>
                        </div>
                        <div class="flex items-center space-x-3 text-sm">
                            <div class="w-2 h-2 bg-green-500 rounded-full"></div>
                            <span class="text-gray-600 dark:text-gray-400">Carrinho de compras via WhatsApp</span>
                        </div>
                        <div class="flex items-center space-x-3 text-sm">
                            <div class="w-2 h-2 bg-green-500 rounded-full"></div>
                            <span class="text-gray-600 dark:text-gray-400">Pagamento PIX automático</span>
                        </div>
                        <div class="flex items-center space-x-3 text-sm">
                            <div class="w-2 h-2 bg-green-500 rounded-full"></div>
                            <span class="text-gray-600 dark:text-gray-400">Entrega digital de ingressos</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Sessão de Suporte -->
            <div class="bg-white/90 dark:bg-gray-800/90 backdrop-blur-sm rounded-3xl p-8 border border-gray-200 dark:border-gray-700 hover-lift group">
                <div class="flex items-center justify-between mb-6">
                    <div class="flex items-center space-x-4">
                        <div class="w-16 h-16 bg-gradient-to-br from-blue-400 to-blue-600 rounded-2xl flex items-center justify-center shadow-lg">
                            <i data-lucide="headphones" class="w-8 h-8 text-white"></i>
                        </div>
                        <div>
                            <h2 class="text-2xl font-bold text-gray-900 dark:text-white">Bot Suporte</h2>
                            <p class="text-gray-600 dark:text-gray-400">Atendimento inteligente com IA</p>
                        </div>
                    </div>
                    <div id="support-status-badge" class="px-4 py-2 bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-300 rounded-full text-sm font-medium flex items-center space-x-2">
                        <div class="w-2 h-2 bg-red-500 rounded-full"></div>
                        <span>Desconectado</span>
                    </div>
                </div>
                
                <!-- QR Code Container -->
                <div id="support-qr-container" class="hidden mb-6">
                    <div class="bg-gradient-to-br from-gray-50 to-gray-100 dark:from-gray-700 dark:to-gray-800 rounded-2xl p-6 text-center border-2 border-dashed border-gray-300 dark:border-gray-600">
                        <div class="mb-4">
                            <div class="w-12 h-12 bg-blue-100 dark:bg-blue-900/30 rounded-xl mx-auto flex items-center justify-center mb-3">
                                <i data-lucide="qr-code" class="w-6 h-6 text-blue-600 dark:text-blue-400"></i>
                            </div>
                            <h3 class="text-lg font-semibold text-gray-900 dark:text-white mb-2">Escaneie com WhatsApp Pessoal</h3>
                            <p class="text-sm text-gray-600 dark:text-gray-400">Use um número dedicado para suporte</p>
                        </div>
                        <div class="flex justify-center">
                            <img id="support-qr-image" class="w-48 h-48 border-4 border-white dark:border-gray-700 rounded-2xl shadow-lg" src="" alt="QR Code Suporte">
                        </div>
                    </div>
                </div>
                
                <!-- Controles -->
                <div class="flex space-x-3 mb-6">
                    <button onclick="startSession('support')" class="flex-1 bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white font-semibold py-3 px-6 rounded-xl transition-all duration-200 flex items-center justify-center space-x-2 group">
                        <i data-lucide="play" class="w-5 h-5 group-hover:scale-110 transition-transform"></i>
                        <span>Iniciar Suporte</span>
                    </button>
                    <button onclick="stopSession('support')" class="px-6 py-3 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-300 rounded-xl transition-colors flex items-center justify-center">
                        <i data-lucide="square" class="w-5 h-5"></i>
                    </button>
                </div>
                
                <!-- Métricas da Sessão -->
                <div class="grid grid-cols-2 gap-4">
                    <div class="bg-gray-50 dark:bg-gray-700/50 rounded-xl p-4">
                        <p class="text-sm text-gray-600 dark:text-gray-400 mb-1">Última atividade</p>
                        <p class="font-semibold text-gray-900 dark:text-white" id="support-activity">-</p>
                    </div>
                    <div class="bg-gray-50 dark:bg-gray-700/50 rounded-xl p-4">
                        <p class="text-sm text-gray-600 dark:text-gray-400 mb-1">Uptime</p>
                        <p class="font-semibold text-gray-900 dark:text-white" id="support-uptime">00:00:00</p>
                    </div>
                </div>
                
                <!-- Features Lista -->
                <div class="mt-6 pt-6 border-t border-gray-200 dark:border-gray-700">
                    <h4 class="font-semibold text-gray-900 dark:text-white mb-3">Funcionalidades</h4>
                    <div class="space-y-2">
                        <div class="flex items-center space-x-3 text-sm">
                            <div class="w-2 h-2 bg-blue-500 rounded-full"></div>
                            <span class="text-gray-600 dark:text-gray-400">Atendimento com IA GPT-4</span>
                        </div>
                        <div class="flex items-center space-x-3 text-sm">
                            <div class="w-2 h-2 bg-blue-500 rounded-full"></div>
                            <span class="text-gray-600 dark:text-gray-400">FAQ automatizado</span>
                        </div>
                        <div class="flex items-center space-x-3 text-sm">
                            <div class="w-2 h-2 bg-blue-500 rounded-full"></div>
                            <span class="text-gray-600 dark:text-gray-400">Direcionamento para vendas</span>
                        </div>
                        <div class="flex items-center space-x-3 text-sm">
                            <div class="w-2 h-2 bg-blue-500 rounded-full"></div>
                            <span class="text-gray-600 dark:text-gray-400">Suporte técnico</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Campanhas e Logs em Grid -->
        <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
            
            <!-- Campanhas -->
            <div class="lg:col-span-2 bg-white/90 dark:bg-gray-800/90 backdrop-blur-sm rounded-3xl p-8 border border-gray-200 dark:border-gray-700">
                <div class="flex items-center justify-between mb-6">
                    <div class="flex items-center space-x-3">
                        <div class="w-12 h-12 bg-purple-100 dark:bg-purple-900/30 rounded-xl flex items-center justify-center">
                            <i data-lucide="megaphone" class="w-6 h-6 text-purple-600 dark:text-purple-400"></i>
                        </div>
                        <div>
                            <h2 class="text-xl font-bold text-gray-900 dark:text-white">Campanhas Marketing</h2>
                            <p class="text-sm text-gray-600 dark:text-gray-400">Disparo em massa via multi-sessão</p>
                        </div>
                    </div>
                    <button class="px-4 py-2 bg-purple-100 dark:bg-purple-900/30 text-purple-700 dark:text-purple-300 rounded-lg hover:bg-purple-200 dark:hover:bg-purple-900/50 transition-colors text-sm font-medium">
                        Nova Campanha
                    </button>
                </div>
                
                <!-- Seletor de Sessão -->
                <div class="mb-6">
                    <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Bot para Envio</label>
                    <select id="campaign-session" class="w-full px-4 py-3 bg-gray-50 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-xl focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-colors">
                        <option value="sales">🛒 Bot Vendas (Promoções e Ofertas)</option>
                        <option value="support">🛟 Bot Suporte (Informativos e Avisos)</option>
                    </select>
                </div>
                
                <!-- Upload de Lista -->
                <div class="mb-6">
                    <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Lista de Números</label>
                    <div class="relative">
                        <input type="file" id="campaign-file" accept=".csv,.txt,.xlsx" class="hidden">
                        <button onclick="document.getElementById('campaign-file').click()" class="w-full px-4 py-3 bg-gray-50 dark:bg-gray-700 border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-xl hover:border-primary-400 dark:hover:border-primary-500 transition-colors flex items-center justify-center space-x-3 text-gray-600 dark:text-gray-400 hover:text-primary-600 dark:hover:text-primary-400">
                            <i data-lucide="upload-cloud" class="w-6 h-6"></i>
                            <span>Clique para fazer upload do arquivo CSV/TXT</span>
                        </button>
                    </div>
                </div>
                
                <!-- Editor de Mensagem -->
                <div class="mb-6">
                    <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Mensagem da Campanha</label>
                    <textarea id="campaign-message" rows="6" class="w-full px-4 py-3 bg-gray-50 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-xl focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-colors resize-none" placeholder="Digite sua mensagem promocional...">🎵 NOVO SHOW CONFIRMADO! 

📅 Data: Este Sábado
🎤 Artista: [Nome do Artista]  
📍 Local: Casa de Show XYZ
💰 A partir de R$ 50

🔥 OFERTA ESPECIAL: 
• Camarote VIP por R$ 800
• Pista Premium por R$ 120  
• PIX com 5% de desconto!

🎫 Reserve já: Digite "cardapio"

#Show #Música #Ingressos</textarea>
                </div>
                
                <!-- Botão de Envio -->
                <button onclick="sendCampaign()" class="w-full bg-gradient-to-r from-primary-500 to-primary-600 hover:from-primary-600 hover:to-primary-700 text-white font-semibold py-4 px-6 rounded-xl transition-all duration-200 flex items-center justify-center space-x-3 group">
                    <i data-lucide="send" class="w-5 h-5 group-hover:translate-x-1 transition-transform"></i>
                    <span>Enviar Campanha</span>
                </button>
                
                <div id="campaign-result" class="mt-4"></div>
            </div>
            
            <!-- Logs System -->
            <div class="bg-white/90 dark:bg-gray-800/90 backdrop-blur-sm rounded-3xl p-6 border border-gray-200 dark:border-gray-700">
                <div class="flex items-center justify-between mb-4">
                    <div class="flex items-center space-x-3">
                        <div class="w-10 h-10 bg-gray-100 dark:bg-gray-700 rounded-xl flex items-center justify-center">
                            <i data-lucide="terminal" class="w-5 h-5 text-gray-600 dark:text-gray-400"></i>
                        </div>
                        <h3 class="text-lg font-semibold text-gray-900 dark:text-white">Logs Sistema</h3>
                    </div>
                    <button onclick="clearLogs()" class="px-3 py-1 bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors text-sm">
                        Limpar
                    </button>
                </div>
                
                <div id="system-logs" class="bg-gray-900 text-green-400 font-mono text-sm p-4 rounded-xl h-96 overflow-y-auto scrollbar-thin scrollbar-thumb-gray-600 scrollbar-track-gray-800">
                    <div class="flex items-center space-x-2 mb-2">
                        <div class="w-2 h-2 bg-green-400 rounded-full animate-pulse"></div>
                        <span class="text-gray-500">[Sistema]</span>
                        <span>Interface moderna carregada ✓</span>
                    </div>
                    <div class="flex items-center space-x-2 mb-2">
                        <div class="w-2 h-2 bg-blue-400 rounded-full"></div>
                        <span class="text-gray-500">[Socket.IO]</span>
                        <span>Conexão estabelecida ✓</span>
                    </div>
                    <div class="flex items-center space-x-2">
                        <div class="w-2 h-2 bg-yellow-400 rounded-full animate-pulse"></div>
                        <span class="text-gray-500">[Multi-Sessão]</span>
                        <span>Aguardando conexões...</span>
                    </div>
                </div>
            </div>
        </div>
    </main>
    
    <!-- Scripts -->
    <script>
        // Inicializar Lucide Icons
        lucide.createIcons();
        
        // Dark Mode Toggle
        const themeToggle = document.getElementById('theme-toggle');
        const html = document.documentElement;
        
        themeToggle.addEventListener('click', () => {
            html.classList.toggle('dark');
            localStorage.setItem('theme', html.classList.contains('dark') ? 'dark' : 'light');
        });
        
        // Aplicar tema salvo
        if (localStorage.getItem('theme') === 'dark') {
            html.classList.add('dark');
        }
        
        // Socket.IO Connection
        const socket = io();
        
        // Estado global
        let sessionStates = {
            sales: { status: 'disconnected', messages: 0, sales: 0, uptime: 0 },
            support: { status: 'disconnected', messages: 0, tickets: 0, uptime: 0 }
        };
        
        let campaignActive = false;
        let startTime = Date.now();
        
        // Inicialização
        document.addEventListener('DOMContentLoaded', function() {
            updateStats();
            setupSocketListeners();
            startMetricsUpdate();
        });
        
        // Socket Listeners
        function setupSocketListeners() {
            socket.on('session_status', (data) => {
                updateSessionStatus(data.session, data.status, data.info);
            });
            
            socket.on('qr_code', (data) => {
                showQRCode(data.session, data.qr);
            });
            
            socket.on('log', (data) => {
                addLog(data.message, data.type || 'info');
            });
            
            socket.on('campaign_progress', (data) => {
                updateCampaignProgress(data.sent, data.total, data.success);
            });
            
            socket.on('metrics_update', (data) => {
                updateMetrics(data);
            });
        }
        
        // Controle de sessões
        function startSession(session) {
            addLog(`Iniciando sessão ${session}...`, 'info');
            fetch(`/api/session/${session}/start`, { method: 'POST' })
                .then(response => response.json())
                .then(data => {
                    if (data.success) {
                        addLog(`[${session.toUpperCase()}] Sessão iniciada com sucesso`, 'success');
                        sessionStates[session].startTime = Date.now();
                    } else {
                        addLog(`Erro ao iniciar ${session}: ${data.message}`, 'error');
                    }
                })
                .catch(error => {
                    console.error('Erro:', error);
                    addLog(`Erro de conexão ao iniciar ${session}`, 'error');
                });
        }
        
        function stopSession(session) {
            addLog(`Parando sessão ${session}...`, 'info');
            fetch(`/api/session/${session}/stop`, { method: 'POST' })
                .then(response => response.json())
                .then(data => {
                    if (data.success) {
                        addLog(`[${session.toUpperCase()}] Sessão parada`, 'warning');
                        updateSessionStatus(session, 'disconnected');
                    } else {
                        addLog(`Erro ao parar ${session}: ${data.message}`, 'error');
                    }
                })
                .catch(error => {
                    console.error('Erro:', error);
                    addLog(`Erro de conexão ao parar ${session}`, 'error');
                });
        }
        
        // Atualizar status das sessões
        function updateSessionStatus(sessionName, status, info = {}) {
            const statusBadge = document.getElementById(`${sessionName}-status-badge`);
            
            const statusConfig = {
                connected: {
                    classes: 'bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-300',
                    text: 'Conectado',
                    icon: 'bg-green-500 status-pulse'
                },
                disconnected: {
                    classes: 'bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-300', 
                    text: 'Desconectado',
                    icon: 'bg-red-500'
                },
                qr_ready: {
                    classes: 'bg-yellow-100 dark:bg-yellow-900/30 text-yellow-700 dark:text-yellow-300',
                    text: 'QR Code Pronto',
                    icon: 'bg-yellow-500 animate-pulse'
                }
            };
            
            const config = statusConfig[status];
            if (config) {
                statusBadge.className = `px-4 py-2 ${config.classes} rounded-full text-sm font-medium flex items-center space-x-2 transition-all duration-300`;
                statusBadge.innerHTML = `
                    <div class="w-2 h-2 ${config.icon} rounded-full"></div>
                    <span>${config.text}</span>
                `;
                
                // Mostrar/ocultar QR container
                const qrContainer = document.getElementById(`${sessionName}-qr-container`);
                if (status === 'qr_ready') {
                    qrContainer.classList.remove('hidden');
                } else {
                    qrContainer.classList.add('hidden');
                }
            }
            
            if (info) {
                sessionStates[sessionName] = { ...sessionStates[sessionName], ...info };
                
                // Atualizar última atividade
                const activityElement = document.getElementById(`${sessionName}-activity`);
                if (activityElement) {
                    activityElement.textContent = info.lastActivity || 'Nenhuma';
                }
            }
            
            updateStats();
        }
        
        // Mostrar QR Code
        function showQRCode(session, qrData) {
            const qrImage = document.getElementById(`${session}-qr-image`);
            if (qrImage) {
                qrImage.src = `data:image/png;base64,${qrData}`;
            }
        }
        
        // Logs com cores e animações
        function addLog(message, type = 'info') {
            const logs = document.getElementById('system-logs');
            const timestamp = new Date().toLocaleTimeString();
            
            const colors = {
                info: 'text-blue-400',
                success: 'text-green-400', 
                error: 'text-red-400',
                warning: 'text-yellow-400'
            };
            
            const iconColors = {
                info: 'bg-blue-400',
                success: 'bg-green-400',
                error: 'bg-red-400', 
                warning: 'bg-yellow-400'
            };
            
            const logEntry = document.createElement('div');
            logEntry.className = 'flex items-center space-x-2 mb-2 animate-fade-in';
            logEntry.innerHTML = `
                <div class="w-2 h-2 ${iconColors[type]} rounded-full ${type === 'info' ? 'animate-pulse' : ''}"></div>
                <span class="text-gray-500">[${timestamp}]</span>
                <span class="${colors[type]}">${message}</span>
            `;
            
            logs.appendChild(logEntry);
            logs.scrollTop = logs.scrollHeight;
            
            // Limitar logs a 100 entradas
            while (logs.children.length > 100) {
                logs.removeChild(logs.firstChild);
            }
        }
        
        function clearLogs() {
            document.getElementById('system-logs').innerHTML = '';
            addLog('Logs limpos pelo usuário', 'info');
        }
        
        // Campanhas
        function sendCampaign() {
            const session = document.getElementById('campaign-session').value;
            const file = document.getElementById('campaign-file').files[0];
            const message = document.getElementById('campaign-message').value;
            
            if (!file) {
                addLog('Erro: Nenhum arquivo selecionado para campanha', 'error');
                return;
            }
            
            if (!message.trim()) {
                addLog('Erro: Mensagem da campanha está vazia', 'error');
                return;
            }
            
            const formData = new FormData();
            formData.append('file', file);
            formData.append('session', session);
            formData.append('message', message);
            
            campaignActive = true;
            addLog(`Iniciando campanha via ${session}...`, 'info');
            
            fetch('/api/campaign/start', {
                method: 'POST',
                body: formData
            })
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    addLog('Campanha iniciada com sucesso!', 'success');
                    showCampaignResult(data.message, 'success');
                } else {
                    addLog(`Erro na campanha: ${data.message}`, 'error');
                    showCampaignResult(data.message, 'error');
                    campaignActive = false;
                }
            })
            .catch(error => {
                console.error('Erro:', error);
                addLog('Erro de conexão ao enviar campanha', 'error');
                campaignActive = false;
            });
        }
        
        function updateCampaignProgress(sent, total, success) {
            addLog(`Progresso: ${sent}/${total} enviados (${success} sucessos)`, 'info');
            
            if (sent >= total) {
                campaignActive = false;
                addLog('Campanha finalizada!', 'success');
            }
        }
        
        function showCampaignResult(message, type) {
            const result = document.getElementById('campaign-result');
            const colors = {
                success: 'bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-300 border-green-200 dark:border-green-700',
                error: 'bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-300 border-red-200 dark:border-red-700'
            };
            
            result.className = `mt-4 p-4 rounded-xl border ${colors[type]} animate-fade-in`;
            result.textContent = message;
        }
        
        // Atualizar estatísticas
        function updateStats() {
            const totalMessages = sessionStates.sales.messages + sessionStates.support.messages;
            const totalSales = sessionStates.sales.sales || 0;
            
            // Simular dados realísticos
            document.getElementById('messages-today').textContent = totalMessages || Math.floor(Math.random() * 1000) + 500;
            document.getElementById('sales-today').textContent = `R$ ${(totalSales/1000).toFixed(1)}k` || `R$ ${(Math.random() * 20 + 5).toFixed(1)}k`;
            document.getElementById('conversion-rate').textContent = `${(Math.random() * 10 + 15).toFixed(1)}%`;
            document.getElementById('response-time').textContent = `${(Math.random() * 2 + 0.5).toFixed(1)}s`;
        }
        
        function updateMetrics(data) {
            if (data.session) {
                sessionStates[data.session] = { ...sessionStates[data.session], ...data };
                updateStats();
            }
        }
        
        // Atualizar uptime das sessões
        function startMetricsUpdate() {
            setInterval(() => {
                ['sales', 'support'].forEach(session => {
                    if (sessionStates[session].status === 'connected' && sessionStates[session].startTime) {
                        const uptime = Date.now() - sessionStates[session].startTime;
                        const hours = Math.floor(uptime / 3600000);
                        const minutes = Math.floor((uptime % 3600000) / 60000);
                        const seconds = Math.floor((uptime % 60000) / 1000);
                        
                        const uptimeElement = document.getElementById(`${session}-uptime`);
                        if (uptimeElement) {
                            uptimeElement.textContent = `${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
                        }
                    }
                });
            }, 1000);
        }
        
        // Inicializar logs
        addLog('Sistema WhatsApp Business Hub inicializado', 'success');
        addLog('Interface premium carregada', 'info');
        addLog('Aguardando conexões das sessões...', 'info');
    </script>
</body>
</html>
